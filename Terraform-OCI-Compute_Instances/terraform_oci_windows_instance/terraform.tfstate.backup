{
  "version": 4,
  "terraform_version": "0.12.6",
  "serial": 31,
  "lineage": "0be05d30-f354-3c7e-f4cf-eb1d900e05af",
  "outputs": {
    "assign_public_ip": {
      "value": [
        "193.122.160.6"
      ],
      "type": [
        "tuple",
        [
          "string"
        ]
      ]
    },
    "instance_id": {
      "value": [
        "ocid1.instance.oc1.iad.anuwcljrzxsy2nacngfkfmxjata47et7x6f3afh6shlfehl662almwea4ocq"
      ],
      "type": [
        "tuple",
        [
          "string"
        ]
      ]
    },
    "internet_gateway_id": {
      "value": "ocid1.internetgateway.oc1.iad.aaaaaaaahgrh5ppj3eiaagjr6igseo6rkxjm6lqym3tqlzky4yx34b3jyvsa",
      "type": "string"
    },
    "private_ip": {
      "value": [
        "192.0.1.2"
      ],
      "type": [
        "tuple",
        [
          "string"
        ]
      ]
    },
    "public_route_table_id": {
      "value": "ocid1.routetable.oc1.iad.aaaaaaaaxynloent6qz44zcsn4q2tnjwqvqruqtocvyxfluhhgz5woxlmpnq",
      "type": "string"
    },
    "public_subnet_id": {
      "value": "ocid1.subnet.oc1.iad.aaaaaaaatsokcjcjwnhds5hzvvnwllxjoe2azhdrv6evtzyhxqzalttqd72q",
      "type": "string"
    },
    "show-availability_domain": {
      "value": [
        {
          "compartment_id": "ocid1.tenancy.oc1..aaaaaaaalylrk6bjiuxqryukd6jrlxgfbwjuulnavxqehvv3crknt7ewhlpa",
          "id": "ocid1.availabilitydomain.oc1..aaaaaaaauvt2n7pijol7uqgdnnsoojcukrijtmcltvfwxazmitk235wyohta",
          "name": "eLhE:US-ASHBURN-AD-1"
        },
        {
          "compartment_id": "ocid1.tenancy.oc1..aaaaaaaalylrk6bjiuxqryukd6jrlxgfbwjuulnavxqehvv3crknt7ewhlpa",
          "id": "ocid1.availabilitydomain.oc1..aaaaaaaaztunlny6ae4yw2vghp5go2zceaonwp6wiioe3tnh2vlaxjjl2n3a",
          "name": "eLhE:US-ASHBURN-AD-2"
        },
        {
          "compartment_id": "ocid1.tenancy.oc1..aaaaaaaalylrk6bjiuxqryukd6jrlxgfbwjuulnavxqehvv3crknt7ewhlpa",
          "id": "ocid1.availabilitydomain.oc1..aaaaaaaatrwxaogr7dl4yschqtrmqrdv6uzis3mgbnomiagqrfhcb7mxsfdq",
          "name": "eLhE:US-ASHBURN-AD-3"
        }
      ],
      "type": [
        "list",
        [
          "object",
          {
            "compartment_id": "string",
            "id": "string",
            "name": "string"
          }
        ]
      ]
    },
    "vcn_id": {
      "value": "ocid1.vcn.oc1.iad.amaaaaaazxsy2naatwhyr4hoer5uk2esfqdo7allbvxbzpdkur2gbbqm7gka",
      "type": "string"
    }
  },
  "resources": [
    {
      "mode": "data",
      "type": "oci_core_images",
      "name": "OLImageOCID-ol7",
      "provider": "provider.oci",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "compartment_id": "ocid1.compartment.oc1..aaaaaaaaukottugsmj5vmneywbzvecjbg5pew2b7clgnm53zwyvgdutdiwvq",
            "display_name": null,
            "filter": [
              {
                "name": "display_name",
                "regex": true,
                "values": [
                  "^Windows-Server-2016-Standard-Edition-VM-Gen2-([\\.0-9-]+)$"
                ]
              }
            ],
            "id": "2020-05-19 09:40:21.9821328 +0000 UTC",
            "images": [
              {
                "agent_features": [],
                "base_image_id": "",
                "compartment_id": "",
                "create_image_allowed": true,
                "defined_tags": {},
                "display_name": "Windows-Server-2016-Standard-Edition-VM-Gen2-2020.04.24-0",
                "freeform_tags": {},
                "id": "ocid1.image.oc1.iad.aaaaaaaafrbpqvrfes6he3szu62ayvgxjrrefgktazqptocbc7dqbr57ed3a",
                "image_source_details": [],
                "instance_id": "",
                "launch_mode": "NATIVE",
                "launch_options": [
                  {
                    "boot_volume_type": "PARAVIRTUALIZED",
                    "firmware": "UEFI_64",
                    "is_consistent_volume_naming_enabled": false,
                    "is_pv_encryption_in_transit_enabled": true,
                    "network_type": "VFIO",
                    "remote_data_volume_type": "PARAVIRTUALIZED"
                  }
                ],
                "operating_system": "Windows",
                "operating_system_version": "Server 2016 Standard",
                "size_in_mbs": "262144",
                "state": "AVAILABLE",
                "time_created": "2020-04-24 09:15:12.777 +0000 UTC"
              },
              {
                "agent_features": [],
                "base_image_id": "",
                "compartment_id": "",
                "create_image_allowed": true,
                "defined_tags": {},
                "display_name": "Windows-Server-2016-Standard-Edition-VM-Gen2-2020.03.16-0",
                "freeform_tags": {},
                "id": "ocid1.image.oc1.iad.aaaaaaaaafrffa5esbcbcmkqappz37wjkrwh4uzpcmuixx4bcnyi4ljqmeya",
                "image_source_details": [],
                "instance_id": "",
                "launch_mode": "NATIVE",
                "launch_options": [
                  {
                    "boot_volume_type": "PARAVIRTUALIZED",
                    "firmware": "UEFI_64",
                    "is_consistent_volume_naming_enabled": false,
                    "is_pv_encryption_in_transit_enabled": true,
                    "network_type": "VFIO",
                    "remote_data_volume_type": "PARAVIRTUALIZED"
                  }
                ],
                "operating_system": "Windows",
                "operating_system_version": "Server 2016 Standard",
                "size_in_mbs": "262144",
                "state": "AVAILABLE",
                "time_created": "2020-03-16 09:18:31.6 +0000 UTC"
              },
              {
                "agent_features": [],
                "base_image_id": "",
                "compartment_id": "",
                "create_image_allowed": true,
                "defined_tags": {},
                "display_name": "Windows-Server-2016-Standard-Edition-VM-Gen2-2020.01.14-0",
                "freeform_tags": {},
                "id": "ocid1.image.oc1.iad.aaaaaaaauwpipy7yex62fvqix7a7ipdzdhc6pdz57vkowvc4jhkfrazm6bwa",
                "image_source_details": [],
                "instance_id": "",
                "launch_mode": "NATIVE",
                "launch_options": [
                  {
                    "boot_volume_type": "PARAVIRTUALIZED",
                    "firmware": "UEFI_64",
                    "is_consistent_volume_naming_enabled": false,
                    "is_pv_encryption_in_transit_enabled": true,
                    "network_type": "VFIO",
                    "remote_data_volume_type": "PARAVIRTUALIZED"
                  }
                ],
                "operating_system": "Windows",
                "operating_system_version": "Server 2016 Standard",
                "size_in_mbs": "262144",
                "state": "AVAILABLE",
                "time_created": "2020-01-15 00:08:30.361 +0000 UTC"
              },
              {
                "agent_features": [],
                "base_image_id": "",
                "compartment_id": "",
                "create_image_allowed": true,
                "defined_tags": {},
                "display_name": "Windows-Server-2016-Standard-Edition-VM-Gen2-2019.11.15-0",
                "freeform_tags": {},
                "id": "ocid1.image.oc1.iad.aaaaaaaaizov2horgjtlxsklhi3cxxjxbcpxzxmtfj5jiftygo76fetussuq",
                "image_source_details": [],
                "instance_id": "",
                "launch_mode": "NATIVE",
                "launch_options": [
                  {
                    "boot_volume_type": "PARAVIRTUALIZED",
                    "firmware": "UEFI_64",
                    "is_consistent_volume_naming_enabled": false,
                    "is_pv_encryption_in_transit_enabled": true,
                    "network_type": "VFIO",
                    "remote_data_volume_type": "PARAVIRTUALIZED"
                  }
                ],
                "operating_system": "Windows",
                "operating_system_version": "Server 2016 Standard",
                "size_in_mbs": "262144",
                "state": "AVAILABLE",
                "time_created": "2019-11-15 04:29:33.28 +0000 UTC"
              }
            ],
            "operating_system": "Windows",
            "operating_system_version": "Server 2016 Standard",
            "shape": null,
            "sort_by": null,
            "sort_order": null,
            "state": null
          }
        }
      ]
    },
    {
      "mode": "data",
      "type": "oci_identity_availability_domains",
      "name": "ads",
      "provider": "provider.oci",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "availability_domains": [
              {
                "compartment_id": "ocid1.tenancy.oc1..aaaaaaaalylrk6bjiuxqryukd6jrlxgfbwjuulnavxqehvv3crknt7ewhlpa",
                "id": "ocid1.availabilitydomain.oc1..aaaaaaaauvt2n7pijol7uqgdnnsoojcukrijtmcltvfwxazmitk235wyohta",
                "name": "eLhE:US-ASHBURN-AD-1"
              },
              {
                "compartment_id": "ocid1.tenancy.oc1..aaaaaaaalylrk6bjiuxqryukd6jrlxgfbwjuulnavxqehvv3crknt7ewhlpa",
                "id": "ocid1.availabilitydomain.oc1..aaaaaaaaztunlny6ae4yw2vghp5go2zceaonwp6wiioe3tnh2vlaxjjl2n3a",
                "name": "eLhE:US-ASHBURN-AD-2"
              },
              {
                "compartment_id": "ocid1.tenancy.oc1..aaaaaaaalylrk6bjiuxqryukd6jrlxgfbwjuulnavxqehvv3crknt7ewhlpa",
                "id": "ocid1.availabilitydomain.oc1..aaaaaaaatrwxaogr7dl4yschqtrmqrdv6uzis3mgbnomiagqrfhcb7mxsfdq",
                "name": "eLhE:US-ASHBURN-AD-3"
              }
            ],
            "compartment_id": "ocid1.tenancy.oc1..aaaaaaaalylrk6bjiuxqryukd6jrlxgfbwjuulnavxqehvv3crknt7ewhlpa",
            "filter": null,
            "id": "2020-05-19 09:40:21.9590591 +0000 UTC"
          }
        }
      ]
    },
    {
      "mode": "data",
      "type": "template_cloudinit_config",
      "name": "cloudinit_config",
      "provider": "provider.template",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "base64_encode": true,
            "gzip": false,
            "id": "1316408555",
            "part": [
              {
                "content": "#ps1_sysnative\n\n# Template variables\n$user='opc'\n$password='OracleApps#97'\n$computerName='TFWindows'\n\nWrite-Output \"Changing $Instance password\"\nnet user $user $password\nWrite-Output \"Changed $Instance password\"\n\n\n\nnet user $user $password /add\nnet localgroup \"remote desktop users\" $user /add\n\nWrite-Output \"Configuring WinRM\"\n# Allow unencrypted if you wish to use http 5985 endpoint\nwinrm set winrm/config/service '@{AllowUnencrypted=\"true\"}'\n\n# Create a self-signed certificate to configure WinRM for HTTPS\n$cert = New-SelfSignedCertificate -CertStoreLocation 'Cert:\\LocalMachine\\My' -DnsName $computerName\nWrite-Output \"Self-signed SSL certificate generated with details: $cert\"\n\n$valueSet = @{\n    Hostname = $computerName\n    CertificateThumbprint = $cert.Thumbprint\n}\n\n$selectorSet = @{\n    Transport = \"HTTPS\"\n    Address = \"*\"\n}\n\n# Remove any prior HTTPS listener\n$listeners = Get-ChildItem WSMan:\\localhost\\Listener\nIf (!($listeners | Where {$_.Keys -like \"TRANSPORT=HTTPS\"}))\n{\n    Remove-WSManInstance -ResourceURI 'winrm/config/Listener' -SelectorSet $selectorSet\n}\n\nWrite-Output \"Enabling HTTPS listener\"\nNew-WSManInstance -ResourceURI 'winrm/config/Listener' -SelectorSet $selectorSet -ValueSet $valueSet\nWrite-Output \"Enabled HTTPS listener\"\nWrite-Output \"Configured WinRM\"\n",
                "content_type": "text/x-shellscript",
                "filename": "cloudinit.ps1",
                "merge_type": ""
              },
              {
                "content": "#cloud-config\nwrite_files:\n - path:     C:/init.ps1\n   content:  |\n     echo \"add your custom commands and scripts here\"\n# Depending on the image that is being used runcmd plugin may not be supported, you may use ps1_sysnative config instead\n# # Windows-Server-2012-R2-Standard-Edition-VM-2018.07.19-0 - cloudbaseinit.plugins.common.userdataplugins.cloudconfig [-] Plugin 'runcmd' is currently not supported\n runcmd:\n  - echo \"Hello from Terraform\"\n   - powershell.exe \"C:/init.ps1\"\n#\n#   # Depending on the image that is being used script plugin may not be supported, you may use ps1_sysnative config instead\n#   # Windows-Server-2012-R2-Standard-Edition-VM-2018.07.19-0 - cloudbaseinit.plugins.common.userdataplugins.cloudconfig [-] Plugin 'script' is currently not supported\n   script:      |\n     \u003cpowershell\u003e\n     winrm set winrm/config/client/auth '@{Basic=\"true\"}'\n     winrm set winrm/config/service/auth '@{Basic=\"true\"}'\n     winrm set winrm/config/service '@{AllowUnencrypted=\"true\"}'\n     winrm set winrm/config/winrs '@{MaxMemoryPerShellMB=\"300\"}'\n     winrm set winrm/config '@{MaxTimeoutms=\"1800000\"}'\n     $file = Join-Path -Path $env:SystemRoot -ChildPath (Get-Date).ToString(\"MM-dd-yy-hh-mm\")\n     New-Item $file -ItemType file -Value \"Hello from Terraform\"\n     \u003c/powershell\u003e\n",
                "content_type": "text/cloud-config",
                "filename": "cloudinit.yml",
                "merge_type": ""
              }
            ],
            "rendered": "Q29udGVudC1UeXBlOiBtdWx0aXBhcnQvbWl4ZWQ7IGJvdW5kYXJ5PSJNSU1FQk9VTkRBUlkiCk1JTUUtVmVyc2lvbjogMS4wDQoNCi0tTUlNRUJPVU5EQVJZDQpDb250ZW50LURpc3Bvc2l0aW9uOiBhdHRhY2htZW50OyBmaWxlbmFtZT0iY2xvdWRpbml0LnBzMSINCkNvbnRlbnQtVHJhbnNmZXItRW5jb2Rpbmc6IDdiaXQNCkNvbnRlbnQtVHlwZTogdGV4dC94LXNoZWxsc2NyaXB0DQpNaW1lLVZlcnNpb246IDEuMA0KDQojcHMxX3N5c25hdGl2ZQoKIyBUZW1wbGF0ZSB2YXJpYWJsZXMKJHVzZXI9J29wYycKJHBhc3N3b3JkPSdPcmFjbGVBcHBzIzk3JwokY29tcHV0ZXJOYW1lPSdURldpbmRvd3MnCgpXcml0ZS1PdXRwdXQgIkNoYW5naW5nICRJbnN0YW5jZSBwYXNzd29yZCIKbmV0IHVzZXIgJHVzZXIgJHBhc3N3b3JkCldyaXRlLU91dHB1dCAiQ2hhbmdlZCAkSW5zdGFuY2UgcGFzc3dvcmQiCgoKCm5ldCB1c2VyICR1c2VyICRwYXNzd29yZCAvYWRkCm5ldCBsb2NhbGdyb3VwICJyZW1vdGUgZGVza3RvcCB1c2VycyIgJHVzZXIgL2FkZAoKV3JpdGUtT3V0cHV0ICJDb25maWd1cmluZyBXaW5STSIKIyBBbGxvdyB1bmVuY3J5cHRlZCBpZiB5b3Ugd2lzaCB0byB1c2UgaHR0cCA1OTg1IGVuZHBvaW50CndpbnJtIHNldCB3aW5ybS9jb25maWcvc2VydmljZSAnQHtBbGxvd1VuZW5jcnlwdGVkPSJ0cnVlIn0nCgojIENyZWF0ZSBhIHNlbGYtc2lnbmVkIGNlcnRpZmljYXRlIHRvIGNvbmZpZ3VyZSBXaW5STSBmb3IgSFRUUFMKJGNlcnQgPSBOZXctU2VsZlNpZ25lZENlcnRpZmljYXRlIC1DZXJ0U3RvcmVMb2NhdGlvbiAnQ2VydDpcTG9jYWxNYWNoaW5lXE15JyAtRG5zTmFtZSAkY29tcHV0ZXJOYW1lCldyaXRlLU91dHB1dCAiU2VsZi1zaWduZWQgU1NMIGNlcnRpZmljYXRlIGdlbmVyYXRlZCB3aXRoIGRldGFpbHM6ICRjZXJ0IgoKJHZhbHVlU2V0ID0gQHsKICAgIEhvc3RuYW1lID0gJGNvbXB1dGVyTmFtZQogICAgQ2VydGlmaWNhdGVUaHVtYnByaW50ID0gJGNlcnQuVGh1bWJwcmludAp9Cgokc2VsZWN0b3JTZXQgPSBAewogICAgVHJhbnNwb3J0ID0gIkhUVFBTIgogICAgQWRkcmVzcyA9ICIqIgp9CgojIFJlbW92ZSBhbnkgcHJpb3IgSFRUUFMgbGlzdGVuZXIKJGxpc3RlbmVycyA9IEdldC1DaGlsZEl0ZW0gV1NNYW46XGxvY2FsaG9zdFxMaXN0ZW5lcgpJZiAoISgkbGlzdGVuZXJzIHwgV2hlcmUgeyRfLktleXMgLWxpa2UgIlRSQU5TUE9SVD1IVFRQUyJ9KSkKewogICAgUmVtb3ZlLVdTTWFuSW5zdGFuY2UgLVJlc291cmNlVVJJICd3aW5ybS9jb25maWcvTGlzdGVuZXInIC1TZWxlY3RvclNldCAkc2VsZWN0b3JTZXQKfQoKV3JpdGUtT3V0cHV0ICJFbmFibGluZyBIVFRQUyBsaXN0ZW5lciIKTmV3LVdTTWFuSW5zdGFuY2UgLVJlc291cmNlVVJJICd3aW5ybS9jb25maWcvTGlzdGVuZXInIC1TZWxlY3RvclNldCAkc2VsZWN0b3JTZXQgLVZhbHVlU2V0ICR2YWx1ZVNldApXcml0ZS1PdXRwdXQgIkVuYWJsZWQgSFRUUFMgbGlzdGVuZXIiCldyaXRlLU91dHB1dCAiQ29uZmlndXJlZCBXaW5STSIKDQotLU1JTUVCT1VOREFSWQ0KQ29udGVudC1EaXNwb3NpdGlvbjogYXR0YWNobWVudDsgZmlsZW5hbWU9ImNsb3VkaW5pdC55bWwiDQpDb250ZW50LVRyYW5zZmVyLUVuY29kaW5nOiA3Yml0DQpDb250ZW50LVR5cGU6IHRleHQvY2xvdWQtY29uZmlnDQpNaW1lLVZlcnNpb246IDEuMA0KDQojY2xvdWQtY29uZmlnCndyaXRlX2ZpbGVzOgogLSBwYXRoOiAgICAgQzovaW5pdC5wczEKICAgY29udGVudDogIHwKICAgICBlY2hvICJhZGQgeW91ciBjdXN0b20gY29tbWFuZHMgYW5kIHNjcmlwdHMgaGVyZSIKIyBEZXBlbmRpbmcgb24gdGhlIGltYWdlIHRoYXQgaXMgYmVpbmcgdXNlZCBydW5jbWQgcGx1Z2luIG1heSBub3QgYmUgc3VwcG9ydGVkLCB5b3UgbWF5IHVzZSBwczFfc3lzbmF0aXZlIGNvbmZpZyBpbnN0ZWFkCiMgIyBXaW5kb3dzLVNlcnZlci0yMDEyLVIyLVN0YW5kYXJkLUVkaXRpb24tVk0tMjAxOC4wNy4xOS0wIC0gY2xvdWRiYXNlaW5pdC5wbHVnaW5zLmNvbW1vbi51c2VyZGF0YXBsdWdpbnMuY2xvdWRjb25maWcgWy1dIFBsdWdpbiAncnVuY21kJyBpcyBjdXJyZW50bHkgbm90IHN1cHBvcnRlZAogcnVuY21kOgogIC0gZWNobyAiSGVsbG8gZnJvbSBUZXJyYWZvcm0iCiAgIC0gcG93ZXJzaGVsbC5leGUgIkM6L2luaXQucHMxIgojCiMgICAjIERlcGVuZGluZyBvbiB0aGUgaW1hZ2UgdGhhdCBpcyBiZWluZyB1c2VkIHNjcmlwdCBwbHVnaW4gbWF5IG5vdCBiZSBzdXBwb3J0ZWQsIHlvdSBtYXkgdXNlIHBzMV9zeXNuYXRpdmUgY29uZmlnIGluc3RlYWQKIyAgICMgV2luZG93cy1TZXJ2ZXItMjAxMi1SMi1TdGFuZGFyZC1FZGl0aW9uLVZNLTIwMTguMDcuMTktMCAtIGNsb3VkYmFzZWluaXQucGx1Z2lucy5jb21tb24udXNlcmRhdGFwbHVnaW5zLmNsb3VkY29uZmlnIFstXSBQbHVnaW4gJ3NjcmlwdCcgaXMgY3VycmVudGx5IG5vdCBzdXBwb3J0ZWQKICAgc2NyaXB0OiAgICAgIHwKICAgICA8cG93ZXJzaGVsbD4KICAgICB3aW5ybSBzZXQgd2lucm0vY29uZmlnL2NsaWVudC9hdXRoICdAe0Jhc2ljPSJ0cnVlIn0nCiAgICAgd2lucm0gc2V0IHdpbnJtL2NvbmZpZy9zZXJ2aWNlL2F1dGggJ0B7QmFzaWM9InRydWUifScKICAgICB3aW5ybSBzZXQgd2lucm0vY29uZmlnL3NlcnZpY2UgJ0B7QWxsb3dVbmVuY3J5cHRlZD0idHJ1ZSJ9JwogICAgIHdpbnJtIHNldCB3aW5ybS9jb25maWcvd2lucnMgJ0B7TWF4TWVtb3J5UGVyU2hlbGxNQj0iMzAwIn0nCiAgICAgd2lucm0gc2V0IHdpbnJtL2NvbmZpZyAnQHtNYXhUaW1lb3V0bXM9IjE4MDAwMDAifScKICAgICAkZmlsZSA9IEpvaW4tUGF0aCAtUGF0aCAkZW52OlN5c3RlbVJvb3QgLUNoaWxkUGF0aCAoR2V0LURhdGUpLlRvU3RyaW5nKCJNTS1kZC15eS1oaC1tbSIpCiAgICAgTmV3LUl0ZW0gJGZpbGUgLUl0ZW1UeXBlIGZpbGUgLVZhbHVlICJIZWxsbyBmcm9tIFRlcnJhZm9ybSIKICAgICA8L3Bvd2Vyc2hlbGw+Cg0KLS1NSU1FQk9VTkRBUlktLQ0K"
          },
          "depends_on": [
            "data.template_file.cloudinit_ps1"
          ]
        }
      ]
    },
    {
      "mode": "data",
      "type": "template_file",
      "name": "cloudinit_ps1",
      "provider": "provider.template",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "367c1a5f8b02cd7226e4f46af60db8b579175662b857c6567611596d5009fbc4",
            "rendered": "#ps1_sysnative\n\n# Template variables\n$user='opc'\n$password='OracleApps#97'\n$computerName='TFWindows'\n\nWrite-Output \"Changing $Instance password\"\nnet user $user $password\nWrite-Output \"Changed $Instance password\"\n\n\n\nnet user $user $password /add\nnet localgroup \"remote desktop users\" $user /add\n\nWrite-Output \"Configuring WinRM\"\n# Allow unencrypted if you wish to use http 5985 endpoint\nwinrm set winrm/config/service '@{AllowUnencrypted=\"true\"}'\n\n# Create a self-signed certificate to configure WinRM for HTTPS\n$cert = New-SelfSignedCertificate -CertStoreLocation 'Cert:\\LocalMachine\\My' -DnsName $computerName\nWrite-Output \"Self-signed SSL certificate generated with details: $cert\"\n\n$valueSet = @{\n    Hostname = $computerName\n    CertificateThumbprint = $cert.Thumbprint\n}\n\n$selectorSet = @{\n    Transport = \"HTTPS\"\n    Address = \"*\"\n}\n\n# Remove any prior HTTPS listener\n$listeners = Get-ChildItem WSMan:\\localhost\\Listener\nIf (!($listeners | Where {$_.Keys -like \"TRANSPORT=HTTPS\"}))\n{\n    Remove-WSManInstance -ResourceURI 'winrm/config/Listener' -SelectorSet $selectorSet\n}\n\nWrite-Output \"Enabling HTTPS listener\"\nNew-WSManInstance -ResourceURI 'winrm/config/Listener' -SelectorSet $selectorSet -ValueSet $valueSet\nWrite-Output \"Enabled HTTPS listener\"\nWrite-Output \"Configured WinRM\"\n",
            "template": "#ps1_sysnative\n\n# Template variables\n$user='${instance_user}'\n$password='${instance_password}'\n$computerName='${instance_name}'\n\nWrite-Output \"Changing $Instance password\"\nnet user $user $password\nWrite-Output \"Changed $Instance password\"\n\n\n\nnet user $user $password /add\nnet localgroup \"remote desktop users\" $user /add\n\nWrite-Output \"Configuring WinRM\"\n# Allow unencrypted if you wish to use http 5985 endpoint\nwinrm set winrm/config/service '@{AllowUnencrypted=\"true\"}'\n\n# Create a self-signed certificate to configure WinRM for HTTPS\n$cert = New-SelfSignedCertificate -CertStoreLocation 'Cert:\\LocalMachine\\My' -DnsName $computerName\nWrite-Output \"Self-signed SSL certificate generated with details: $cert\"\n\n$valueSet = @{\n    Hostname = $computerName\n    CertificateThumbprint = $cert.Thumbprint\n}\n\n$selectorSet = @{\n    Transport = \"HTTPS\"\n    Address = \"*\"\n}\n\n# Remove any prior HTTPS listener\n$listeners = Get-ChildItem WSMan:\\localhost\\Listener\nIf (!($listeners | Where {$_.Keys -like \"TRANSPORT=HTTPS\"}))\n{\n    Remove-WSManInstance -ResourceURI 'winrm/config/Listener' -SelectorSet $selectorSet\n}\n\nWrite-Output \"Enabling HTTPS listener\"\nNew-WSManInstance -ResourceURI 'winrm/config/Listener' -SelectorSet $selectorSet -ValueSet $valueSet\nWrite-Output \"Enabled HTTPS listener\"\nWrite-Output \"Configured WinRM\"\n",
            "vars": {
              "instance_name": "TFWindows",
              "instance_password": "OracleApps#97",
              "instance_user": "opc"
            }
          }
        }
      ]
    },
    {
      "mode": "managed",
      "type": "oci_core_instance",
      "name": "this",
      "each": "list",
      "provider": "provider.oci",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "agent_config": [
              {
                "is_management_disabled": false,
                "is_monitoring_disabled": false
              }
            ],
            "availability_domain": "eLhE:US-ASHBURN-AD-1",
            "boot_volume_id": "ocid1.bootvolume.oc1.iad.abuwcljrgzg3wff3evaifpiqcbefcof3jolvjokao2ocjsvpop5mc57ihmga",
            "compartment_id": "ocid1.compartment.oc1..aaaaaaaaukottugsmj5vmneywbzvecjbg5pew2b7clgnm53zwyvgdutdiwvq",
            "create_vnic_details": [
              {
                "assign_public_ip": "true",
                "defined_tags": {
                  "I_IAAS.I_PL": "INDIA",
                  "LIFECYCLE_STATE.CHOOSE_STATE": "STOP",
                  "Oracle-Tags.CreatedBy": "oracleidentitycloudservice/meghashree.n@oracle.com",
                  "Oracle-Tags.CreatedOn": "2020-05-19T09:40:37.997Z"
                },
                "display_name": "primaryvnic",
                "freeform_tags": {},
                "hostname_label": "instance2",
                "nsg_ids": null,
                "private_ip": "192.0.1.2",
                "skip_source_dest_check": false,
                "subnet_id": "ocid1.subnet.oc1.iad.aaaaaaaatsokcjcjwnhds5hzvvnwllxjoe2azhdrv6evtzyhxqzalttqd72q"
              }
            ],
            "dedicated_vm_host_id": null,
            "defined_tags": {
              "I_IAAS.I_PL": "INDIA",
              "LIFECYCLE_STATE.CHOOSE_STATE": "STOP",
              "Oracle-Tags.CreatedBy": "oracleidentitycloudservice/meghashree.n@oracle.com",
              "Oracle-Tags.CreatedOn": "2020-05-19T09:40:37.752Z"
            },
            "display_name": "TFWindows",
            "extended_metadata": null,
            "fault_domain": "FAULT-DOMAIN-2",
            "freeform_tags": {},
            "hostname_label": "instance2",
            "id": "ocid1.instance.oc1.iad.anuwcljrzxsy2nacngfkfmxjata47et7x6f3afh6shlfehl662almwea4ocq",
            "image": "ocid1.image.oc1.iad.aaaaaaaafrbpqvrfes6he3szu62ayvgxjrrefgktazqptocbc7dqbr57ed3a",
            "ipxe_script": null,
            "is_pv_encryption_in_transit_enabled": null,
            "launch_mode": "NATIVE",
            "launch_options": [
              {
                "boot_volume_type": "PARAVIRTUALIZED",
                "firmware": "UEFI_64",
                "is_consistent_volume_naming_enabled": false,
                "is_pv_encryption_in_transit_enabled": false,
                "network_type": "VFIO",
                "remote_data_volume_type": "PARAVIRTUALIZED"
              }
            ],
            "metadata": null,
            "preserve_boot_volume": null,
            "private_ip": "192.0.1.2",
            "public_ip": "193.122.160.6",
            "region": "iad",
            "shape": "VM.Standard2.1",
            "shape_config": [
              {
                "gpu_description": "",
                "gpus": 0,
                "local_disk_description": "",
                "local_disks": 0,
                "local_disks_total_size_in_gbs": 0,
                "max_vnic_attachments": 2,
                "memory_in_gbs": 15,
                "networking_bandwidth_in_gbps": 1,
                "ocpus": 1,
                "processor_description": "2.0 GHz Intel® Xeon® Platinum 8167M (Skylake)"
              }
            ],
            "source_details": [
              {
                "boot_volume_size_in_gbs": "256",
                "kms_key_id": "",
                "source_id": "ocid1.image.oc1.iad.aaaaaaaafrbpqvrfes6he3szu62ayvgxjrrefgktazqptocbc7dqbr57ed3a",
                "source_type": "image"
              }
            ],
            "state": "RUNNING",
            "subnet_id": "ocid1.subnet.oc1.iad.aaaaaaaatsokcjcjwnhds5hzvvnwllxjoe2azhdrv6evtzyhxqzalttqd72q",
            "system_tags": {},
            "time_created": "2020-05-19 09:40:38.6 +0000 UTC",
            "time_maintenance_reboot_due": "",
            "timeouts": {
              "create": "60m",
              "delete": null,
              "update": null
            }
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozNjAwMDAwMDAwMDAwLCJkZWxldGUiOjcyMDAwMDAwMDAwMDAsInVwZGF0ZSI6NzIwMDAwMDAwMDAwMH19",
          "depends_on": [
            "data.oci_core_images.OLImageOCID-ol7",
            "data.oci_identity_availability_domains.ads",
            "oci_core_subnet.publicsubnet"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "oci_core_internet_gateway",
      "name": "vcn1",
      "provider": "provider.oci",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "compartment_id": "ocid1.compartment.oc1..aaaaaaaaukottugsmj5vmneywbzvecjbg5pew2b7clgnm53zwyvgdutdiwvq",
            "defined_tags": {
              "I_IAAS.I_PL": "INDIA",
              "LIFECYCLE_STATE.CHOOSE_STATE": "STOP",
              "Oracle-Tags.CreatedBy": "oracleidentitycloudservice/meghashree.n@oracle.com",
              "Oracle-Tags.CreatedOn": "2020-05-19T09:40:34.547Z"
            },
            "display_name": "internetgateway20200519094034",
            "enabled": true,
            "freeform_tags": {},
            "id": "ocid1.internetgateway.oc1.iad.aaaaaaaahgrh5ppj3eiaagjr6igseo6rkxjm6lqym3tqlzky4yx34b3jyvsa",
            "state": "AVAILABLE",
            "time_created": "2020-05-19 09:40:34.564 +0000 UTC",
            "timeouts": null,
            "vcn_id": "ocid1.vcn.oc1.iad.amaaaaaazxsy2naatwhyr4hoer5uk2esfqdo7allbvxbzpdkur2gbbqm7gka"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo5MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwLCJ1cGRhdGUiOjkwMDAwMDAwMDAwMH19",
          "depends_on": [
            "oci_core_vcn.vcn1"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "oci_core_route_table",
      "name": "publicRT",
      "provider": "provider.oci",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "compartment_id": "ocid1.compartment.oc1..aaaaaaaaukottugsmj5vmneywbzvecjbg5pew2b7clgnm53zwyvgdutdiwvq",
            "defined_tags": {
              "I_IAAS.I_PL": "INDIA",
              "LIFECYCLE_STATE.CHOOSE_STATE": "STOP",
              "Oracle-Tags.CreatedBy": "oracleidentitycloudservice/meghashree.n@oracle.com",
              "Oracle-Tags.CreatedOn": "2020-05-19T09:40:35.521Z"
            },
            "display_name": "public_route_table",
            "freeform_tags": {},
            "id": "ocid1.routetable.oc1.iad.aaaaaaaaxynloent6qz44zcsn4q2tnjwqvqruqtocvyxfluhhgz5woxlmpnq",
            "route_rules": [
              {
                "cidr_block": "",
                "description": "",
                "destination": "0.0.0.0/0",
                "destination_type": "CIDR_BLOCK",
                "network_entity_id": "ocid1.internetgateway.oc1.iad.aaaaaaaahgrh5ppj3eiaagjr6igseo6rkxjm6lqym3tqlzky4yx34b3jyvsa"
              }
            ],
            "state": "AVAILABLE",
            "time_created": "2020-05-19 09:40:35.541 +0000 UTC",
            "timeouts": null,
            "vcn_id": "ocid1.vcn.oc1.iad.amaaaaaazxsy2naatwhyr4hoer5uk2esfqdo7allbvxbzpdkur2gbbqm7gka"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo5MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwLCJ1cGRhdGUiOjkwMDAwMDAwMDAwMH19",
          "depends_on": [
            "oci_core_internet_gateway.vcn1",
            "oci_core_vcn.vcn1"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "oci_core_security_list",
      "name": "publicSL",
      "provider": "provider.oci",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "compartment_id": "ocid1.compartment.oc1..aaaaaaaaukottugsmj5vmneywbzvecjbg5pew2b7clgnm53zwyvgdutdiwvq",
            "defined_tags": {
              "I_IAAS.I_PL": "INDIA",
              "LIFECYCLE_STATE.CHOOSE_STATE": "STOP",
              "Oracle-Tags.CreatedBy": "oracleidentitycloudservice/meghashree.n@oracle.com",
              "Oracle-Tags.CreatedOn": "2020-05-19T09:40:34.658Z"
            },
            "display_name": "public_security_list",
            "egress_security_rules": [
              {
                "description": "",
                "destination": "0.0.0.0/0",
                "destination_type": "CIDR_BLOCK",
                "icmp_options": [],
                "protocol": "all",
                "stateless": false,
                "tcp_options": [],
                "udp_options": []
              }
            ],
            "freeform_tags": {},
            "id": "ocid1.securitylist.oc1.iad.aaaaaaaamhrsxgghgrh6s7ijj4bo7uezhoouvamqrdnwc7srqunxhurzpopq",
            "ingress_security_rules": [
              {
                "description": "",
                "icmp_options": [
                  {
                    "code": -1,
                    "type": 8
                  }
                ],
                "protocol": "1",
                "source": "0.0.0.0/0",
                "source_type": "CIDR_BLOCK",
                "stateless": false,
                "tcp_options": [],
                "udp_options": []
              },
              {
                "description": "",
                "icmp_options": [
                  {
                    "code": 4,
                    "type": 3
                  }
                ],
                "protocol": "1",
                "source": "0.0.0.0/0",
                "source_type": "CIDR_BLOCK",
                "stateless": false,
                "tcp_options": [],
                "udp_options": []
              },
              {
                "description": "",
                "icmp_options": [],
                "protocol": "6",
                "source": "0.0.0.0/0",
                "source_type": "CIDR_BLOCK",
                "stateless": false,
                "tcp_options": [
                  {
                    "max": 3389,
                    "min": 3389,
                    "source_port_range": []
                  }
                ],
                "udp_options": []
              },
              {
                "description": "",
                "icmp_options": [],
                "protocol": "6",
                "source": "0.0.0.0/0",
                "source_type": "CIDR_BLOCK",
                "stateless": false,
                "tcp_options": [
                  {
                    "max": 5986,
                    "min": 5985,
                    "source_port_range": []
                  }
                ],
                "udp_options": []
              }
            ],
            "state": "AVAILABLE",
            "time_created": "2020-05-19 09:40:34.668 +0000 UTC",
            "timeouts": null,
            "vcn_id": "ocid1.vcn.oc1.iad.amaaaaaazxsy2naatwhyr4hoer5uk2esfqdo7allbvxbzpdkur2gbbqm7gka"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo5MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwLCJ1cGRhdGUiOjkwMDAwMDAwMDAwMH19",
          "depends_on": [
            "oci_core_vcn.vcn1"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "oci_core_subnet",
      "name": "publicsubnet",
      "provider": "provider.oci",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "availability_domain": null,
            "cidr_block": "192.0.1.0/24",
            "compartment_id": "ocid1.compartment.oc1..aaaaaaaaukottugsmj5vmneywbzvecjbg5pew2b7clgnm53zwyvgdutdiwvq",
            "defined_tags": {
              "I_IAAS.I_PL": "INDIA",
              "LIFECYCLE_STATE.CHOOSE_STATE": "STOP",
              "Oracle-Tags.CreatedBy": "oracleidentitycloudservice/meghashree.n@oracle.com",
              "Oracle-Tags.CreatedOn": "2020-05-19T09:40:36.403Z"
            },
            "dhcp_options_id": "ocid1.dhcpoptions.oc1.iad.aaaaaaaalav3tsvt6ql3eaucnoucpfpoysg5a7j2taqveviq45tpdkhmeeia",
            "display_name": "{var.subnet_display_name}",
            "dns_label": "publicsubnet",
            "freeform_tags": {},
            "id": "ocid1.subnet.oc1.iad.aaaaaaaatsokcjcjwnhds5hzvvnwllxjoe2azhdrv6evtzyhxqzalttqd72q",
            "ipv6cidr_block": null,
            "ipv6public_cidr_block": null,
            "ipv6virtual_router_ip": null,
            "prohibit_public_ip_on_vnic": false,
            "route_table_id": "ocid1.routetable.oc1.iad.aaaaaaaaxynloent6qz44zcsn4q2tnjwqvqruqtocvyxfluhhgz5woxlmpnq",
            "security_list_ids": [
              "ocid1.securitylist.oc1.iad.aaaaaaaamhrsxgghgrh6s7ijj4bo7uezhoouvamqrdnwc7srqunxhurzpopq"
            ],
            "state": "AVAILABLE",
            "subnet_domain_name": "publicsubnet.vcn1.oraclevcn.com",
            "time_created": "2020-05-19 09:40:36.432 +0000 UTC",
            "timeouts": null,
            "vcn_id": "ocid1.vcn.oc1.iad.amaaaaaazxsy2naatwhyr4hoer5uk2esfqdo7allbvxbzpdkur2gbbqm7gka",
            "virtual_router_ip": "192.0.1.1",
            "virtual_router_mac": "00:00:17:02:B0:53"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo5MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwLCJ1cGRhdGUiOjkwMDAwMDAwMDAwMH19",
          "depends_on": [
            "oci_core_route_table.publicRT",
            "oci_core_security_list.publicSL",
            "oci_core_vcn.vcn1"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "oci_core_vcn",
      "name": "vcn1",
      "provider": "provider.oci",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "cidr_block": "192.0.0.0/16",
            "compartment_id": "ocid1.compartment.oc1..aaaaaaaaukottugsmj5vmneywbzvecjbg5pew2b7clgnm53zwyvgdutdiwvq",
            "default_dhcp_options_id": "ocid1.dhcpoptions.oc1.iad.aaaaaaaalav3tsvt6ql3eaucnoucpfpoysg5a7j2taqveviq45tpdkhmeeia",
            "default_route_table_id": "ocid1.routetable.oc1.iad.aaaaaaaaavvhwikajb6evyf26z2rmfwokvlqqgizh33gxwfqricmmuotrsxa",
            "default_security_list_id": "ocid1.securitylist.oc1.iad.aaaaaaaakwjkd6cd7ivws5bhgfunv5dqy533hlohu7wi375gz5oxhgkikp4a",
            "defined_tags": {
              "I_IAAS.I_PL": "INDIA",
              "LIFECYCLE_STATE.CHOOSE_STATE": "STOP",
              "Oracle-Tags.CreatedBy": "oracleidentitycloudservice/meghashree.n@oracle.com",
              "Oracle-Tags.CreatedOn": "2020-05-19T09:40:33.110Z"
            },
            "display_name": "vcn1",
            "dns_label": "vcn1",
            "freeform_tags": {},
            "id": "ocid1.vcn.oc1.iad.amaaaaaazxsy2naatwhyr4hoer5uk2esfqdo7allbvxbzpdkur2gbbqm7gka",
            "ipv6cidr_block": null,
            "ipv6public_cidr_block": null,
            "is_ipv6enabled": null,
            "state": "AVAILABLE",
            "time_created": "2020-05-19 09:40:33.113 +0000 UTC",
            "timeouts": null,
            "vcn_domain_name": "vcn1.oraclevcn.com"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo5MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwLCJ1cGRhdGUiOjkwMDAwMDAwMDAwMH19"
        }
      ]
    },
    {
      "mode": "managed",
      "type": "oci_core_volume",
      "name": "this",
      "provider": "provider.oci",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "availability_domain": "eLhE:US-ASHBURN-AD-1",
            "backup_policy_id": null,
            "compartment_id": "ocid1.compartment.oc1..aaaaaaaaukottugsmj5vmneywbzvecjbg5pew2b7clgnm53zwyvgdutdiwvq",
            "defined_tags": {},
            "display_name": "Terraform_deployed_Instance",
            "freeform_tags": {},
            "id": "ocid1.volume.oc1.iad.abuwcljrfq7l6ojxreabf3lgjkvsnkmkqtvoq5lggstdo4cksvucxvxsikxq",
            "is_hydrated": true,
            "kms_key_id": null,
            "size_in_gbs": "256",
            "size_in_mbs": "262144",
            "source_details": [],
            "state": "AVAILABLE",
            "system_tags": {},
            "time_created": "2020-05-19 09:40:33.107 +0000 UTC",
            "timeouts": null,
            "volume_backup_id": null,
            "volume_group_id": null,
            "vpus_per_gb": "10"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo5MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwLCJ1cGRhdGUiOjkwMDAwMDAwMDAwMH19",
          "depends_on": [
            "data.oci_identity_availability_domains.ads"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "oci_core_volume_attachment",
      "name": "this",
      "each": "list",
      "provider": "provider.oci",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "attachment_type": "iscsi",
            "availability_domain": "eLhE:US-ASHBURN-AD-1",
            "chap_secret": "Gfgtu0NjAgmrQ90F",
            "chap_username": "ocid1.volume.oc1.iad.abuwcljrfq7l6ojxreabf3lgjkvsnkmkqtvoq5lggstdo4cksvucxvxsikxq",
            "compartment_id": "ocid1.compartment.oc1..aaaaaaaaukottugsmj5vmneywbzvecjbg5pew2b7clgnm53zwyvgdutdiwvq",
            "device": null,
            "display_name": "volumeattachment20200519094545",
            "id": "ocid1.volumeattachment.oc1.iad.anuwcljrzxsy2nacyqpqbgrd6nqnsjxby6vnqor663nbtqhctrk2qc22u74q",
            "instance_id": "ocid1.instance.oc1.iad.anuwcljrzxsy2nacngfkfmxjata47et7x6f3afh6shlfehl662almwea4ocq",
            "ipv4": "169.254.2.2",
            "iqn": "iqn.2015-12.com.oracleiaas:a7b2c66f-30d2-473c-8a2f-c09671fb7a8f",
            "is_pv_encryption_in_transit_enabled": false,
            "is_read_only": false,
            "is_shareable": null,
            "port": 3260,
            "state": "ATTACHED",
            "time_created": "2020-05-19 09:45:45.972 +0000 UTC",
            "timeouts": null,
            "use_chap": true,
            "volume_id": "ocid1.volume.oc1.iad.abuwcljrfq7l6ojxreabf3lgjkvsnkmkqtvoq5lggstdo4cksvucxvxsikxq"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo5MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwLCJ1cGRhdGUiOjkwMDAwMDAwMDAwMH19",
          "depends_on": [
            "oci_core_instance.this",
            "oci_core_volume.this"
          ]
        }
      ]
    }
  ]
}
